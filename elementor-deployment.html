<!-- 
  HUB OF LUCK - ELEMENTOR DEPLOYMENT CODE (FINAL FIX)
  ==================================================
  1. Add an "HTML" widget in Elementor.
  2. Paste this code.
  3. Change THE_PRODUCTION_URL to your actual Vercel domain (e.g., hub-of-luck-app1.vercel.app)
-->

<div id="hol-container" style="width: 100%; position: relative; background: #ffffff; min-height: 500px; border-radius: 8px; overflow: hidden;">
  <!-- Loading State -->
  <div id="hol-loader" style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #ffffff; z-index: 50; transition: opacity 0.5s ease;">
    <div style="width: 32px; height: 32px; border: 3px solid #f3f3f3; border-top: 3px solid #10b981; border-radius: 50%; animation: hol-spin 1s linear infinite;"></div>
    <p style="margin-top: 20px; color: #10b981; font-weight: 900; letter-spacing: 2px; font-size: 11px; text-transform: uppercase; font-family: sans-serif;">Establishing Secure Connection...</p>
  </div>

  <iframe 
    id="hol-iframe"
    src="https://hub-of-luck-app1.vercel.app" 
    style="width: 100%; border: none; visibility: hidden; min-height: 800px;"
    scrolling="no"
    allow="geolocation"
  ></iframe>
</div>

<style>
  @keyframes hol-spin { to { transform: rotate(360deg); } }
  #hol-iframe { width: 1px; min-width: 100%; }
</style>

<script>
  (function() {
    const iframe = document.getElementById('hol-iframe');
    const loader = document.getElementById('hol-loader');

    // Fail-safe: if iframe takes too long, show a message
    const timeout = setTimeout(() => {
      if (loader.style.display !== 'none') {
        loader.innerHTML = '<p style="color: #666; font-size: 12px; font-family: sans-serif;">Taking longer than usual. <a href="javascript:location.reload()" style="color: #10b981; font-weight: bold;">Click to retry</a></p>';
      }
    }, 10000);

    // Hide loader when iframe signals it is ready
    iframe.onload = function() {
      clearTimeout(timeout);
      loader.style.opacity = '0';
      setTimeout(() => {
        loader.style.display = 'none';
        iframe.style.visibility = 'visible';
      }, 500);
    };

    // Listen for resize messages from the React app
    window.addEventListener('message', function(e) {
      if (e.data && e.data.type === 'hol-resize') {
        iframe.style.height = e.data.height + 'px';
      }
    }, false);
  })();
</script>