<!-- 
  HUB OF LUCK - ELEMENTOR DEPLOYMENT CODE (v2.0)
  =============================================
  1. Add an "HTML" widget in Elementor.
  2. Paste this code.
-->

<div id="hol-widget-wrapper" style="width: 100%; position: relative; min-height: 400px; background: #ffffff;">
  
  <!-- Modern Skeleton Loader -->
  <div id="hol-ux-loader" style="position: absolute; inset: 0; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #ffffff;">
    <div style="width: 30px; height: 30px; border: 2px solid #f1f5f9; border-top-color: #10b981; border-radius: 50%; animation: hol-spin 1s linear infinite;"></div>
    <div style="margin-top: 15px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 10px; font-weight: 800; color: #64748b; letter-spacing: 0.1em; text-transform: uppercase;">Connecting to Hub Hub...</div>
    
    <!-- Fallback if it takes too long (30 seconds) -->
    <div id="hol-error-help" style="display: none; margin-top: 20px; text-align: center;">
      <p style="font-size: 12px; color: #ef4444;">App taking longer than expected to respond.</p>
      <button onclick="location.reload()" style="background: #1e293b; color: #fff; border: none; padding: 8px 15px; border-radius: 6px; font-size: 11px; font-weight: 700; cursor: pointer;">Force Reload</button>
    </div>
  </div>

  <!-- The App Iframe -->
  <iframe 
    id="hol-app-iframe"
    src="https://hub-of-luck-app1.vercel.app?embedded=true" 
    style="width: 100%; border: none; display: block; visibility: hidden; opacity: 0; transition: opacity 0.6s ease;"
    scrolling="no"
    allow="geolocation"
  ></iframe>
</div>

<style>
  @keyframes hol-spin { to { transform: rotate(360deg); } }
  #hol-app-iframe { min-height: 600px; width: 1px; min-width: 100%; }
</style>

<script>
  (function() {
    const iframe = document.getElementById('hol-app-iframe');
    const loader = document.getElementById('hol-ux-loader');
    const errHelp = document.getElementById('hol-error-help');

    // Show help button after 10 seconds of "Gray"
    setTimeout(() => {
      if (loader.style.display !== 'none') {
        errHelp.style.display = 'block';
      }
    }, 10000);

    // When the app reports its ready
    iframe.onload = function() {
      console.log('Hub of Luck: App Handshake Complete');
      loader.style.opacity = '0';
      setTimeout(() => {
        loader.style.display = 'none';
        iframe.style.visibility = 'visible';
        iframe.style.opacity = '1';
      }, 400);
    };

    // Listen for resize messages from the React app
    window.addEventListener('message', function(e) {
      if (e.data && e.data.type === 'hol-resize') {
        iframe.style.height = e.data.height + 'px';
      }
    }, false);
  })();
</script>