<!-- 
  HUB OF LUCK - STABLE ELEMENTOR WIDGET (v4.0)
  ===========================================
-->

<div id="hol-container" style="width: 100%; min-height: 800px; position: relative; background: #ffffff;">
  
  <!-- Overlay Loader -->
  <div id="hol-loader" style="position: absolute; inset: 0; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #ffffff;">
    <div style="width: 30px; height: 30px; border: 2px solid #f3f3f3; border-top: 2px solid #10b981; border-radius: 50%; animation: hol-spin 1s linear infinite;"></div>
    <p style="margin-top: 20px; font-family: sans-serif; font-size: 10px; font-weight: 800; color: #94a3b8; letter-spacing: 2px; text-transform: uppercase;">Connecting to Hub...</p>
  </div>

  <!-- The App -->
  <iframe 
    id="hol-app"
    src="https://hub-of-luck-app1.vercel.app?embedded=true" 
    style="width: 100%; height: 1200px; border: none; display: block; opacity: 0; transition: opacity 0.5s;"
    scrolling="no"
  ></iframe>
</div>

<style>
  @keyframes hol-spin { to { transform: rotate(360deg); } }
</style>

<script>
(function() {
  const frame = document.getElementById('hol-app');
  const loader = document.getElementById('hol-loader');
  
  // Handshake listener
  window.addEventListener('message', function(e) {
    if (e.data.type === 'hol-app-ready') {
      loader.style.opacity = '0';
      frame.style.opacity = '1';
      setTimeout(() => loader.style.display = 'none', 500);
    }
    
    if (e.data.type === 'hol-resize') {
      frame.style.height = e.data.height + 'px';
    }
  });

  // Fallback reveal after 5 seconds if handshake fails
  setTimeout(() => {
    if (loader.style.display !== 'none') {
      loader.style.opacity = '0';
      frame.style.opacity = '1';
      setTimeout(() => loader.style.display = 'none', 500);
    }
  }, 5000);
})();
</script>